---
import type { Product } from '~/types';
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  product: Product & { image?: ImageMetadata | string };
  url: string;
}

const { product } = Astro.props;
---

<article class="py-8 sm:py-16 lg:py-20 mx-auto">
  <section>
    <header class="intersect-once intersect-quarter motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade">
      <h1 class="mb-4 text-4xl font-bold leading-tight lg:text-5xl">{product.title}</h1>
      <div class="mb-4 flex items-center text-sm text-gray-500">
        {
          product.type && (
            <a
              href={`/product/${product.type.slug}`}
              class="mr-4 text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300"
            >
              {product.type.title}
            </a>
          )
        }
        {
          product.publishDate && (
            <time datetime={product.publishDate.toISOString()}>
              {product.publishDate.toLocaleDateString('ru-RU', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })}
            </time>
          )
        }
      </div>
      {product.image && <Image src={product.image} alt={product.title} class="rounded-lg" />}
    </header>

    <div class="prose prose-lg mx-auto dark:prose-invert">
      <slot />
    </div>

    {
      product.dimensions && (
        <div class="mt-8">
          <h2 class="mb-4 text-2xl font-bold">Характеристики</h2>
          <dl class="grid grid-cols-1 gap-4 sm:grid-cols-2">
            <div class="rounded-lg bg-gray-50 p-4 dark:bg-gray-800">
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Габариты</dt>
              <dd class="mt-1 text-lg font-semibold">{product.dimensions}</dd>
            </div>
            {product.weight && (
              <div class="rounded-lg bg-gray-50 p-4 dark:bg-gray-800">
                <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Вес</dt>
                <dd class="mt-1 text-lg font-semibold">{product.weight}</dd>
              </div>
            )}
          </dl>
        </div>
      )
    }
  </section>
</article>
